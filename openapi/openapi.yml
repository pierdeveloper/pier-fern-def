openapi: 3.0.1
info:
  title: Pier API
  version: ''
paths:
  /applications:
    post:
      operationId: applications_create
      tags:
        - Applications
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
              examples:
                Example1:
                  value:
                    id: app_f0467657bba948e6a87292e182132848
                    borrower_id: bor_a1d0c30d77104f35b4c842b99132624e
                    credit_type: consumer_installment_loan
                    rejection_reasons: []
                    status: pending
                    created_on: '2022-12-31T01:36:52.606Z'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Create an application
      security: &ref_0
        - BasicAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                borrower_id:
                  type: string
                  description: The `borrower_id` of the borrower the application is for
                  example: bor_a1d0c30d77104f35b4c842b99132624e
                credit_type:
                  $ref: '#/components/schemas/CreditType'
                  description: The type of credit product.
                requested_amount:
                  type: integer
                  description: >-
                    If the borrower requests an amount in their application, the
                    requested loan or credit line amount (in cents).
                third_party_disbursement_destination:
                  type: string
                  description: >-
                    For credit applications of type `consumer_bnpl`, the third
                    party (i.e. merchant) receiving the funds is
              required:
                - borrower_id
                - credit_type
            examples:
              Example1:
                value:
                  borrower_id: bor_a1d0c30d77104f35b4c842b99132624e
                  credit_type: consumer_installment_loan
                  requested_amount: 200000
    get:
      description: List all applications associated with your account
      operationId: applications_getAll
      tags:
        - Applications
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Application'
              examples:
                Example1:
                  value:
                    - id: app_f0467657bba948e6a87292e182132848
                      borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                      credit_type: consumer_revolving_line_of_credit
                      rejection_reasons: []
                      status: approved
                      created_on: '2022-12-31T01:36:52.606Z'
                      decisioned_on: '2023-01-17T05:31:52.955Z'
                      offer:
                        - type: line_of_credit
                          amount: 1000000
                          apr: 0
                          annual_fee: 0
                          billing_cycle: 30
                          finance_charge: 0
                          grace_period: 21
                          grace_period_interest_rate: 0
                          interest_rate: 0
                          late_payment_fee: 0
                          origination_fee: 0
                          term: 24
                    - id: app_f0467657bba948e6a87292e182132848
                      borrower_id: bor_a1d0c30d77104f35b4c842b99132624e
                      credit_type: consumer_installment_loan
                      rejection_reasons: []
                      status: pending
                      created_on: '2022-12-31T01:36:52.606Z'
      summary: List all applications
      security: *ref_0
  /applications/{application_id}/approve:
    post:
      operationId: applications_approve
      tags:
        - Applications
      parameters:
        - name: application_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ApplicationId'
          examples:
            Example1:
              value: app_f0467657bba948e6a87292e182132848
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
              examples:
                Example1:
                  value:
                    id: app_f0467657bba948e6a87292e182132848
                    borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                    credit_type: consumer_revolving_line_of_credit
                    rejection_reasons: []
                    status: approved
                    created_on: '2022-12-31T01:36:52.606Z'
                    decisioned_on: '2023-01-17T05:31:52.955Z'
                    offer:
                      - type: line_of_credit
                        amount: 1000000
                        apr: 0
                        annual_fee: 0
                        billing_cycle: 30
                        finance_charge: 0
                        grace_period: 21
                        grace_period_interest_rate: 0
                        interest_rate: 0
                        late_payment_fee: 0
                        origination_fee: 0
                        term: 24
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Approve an application
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Offer'
            examples:
              Example1:
                value:
                  type: loan
                  amount: 1000000
                  grace_period: 0
                  grace_period_interest_rate: 0
                  interest_rate: 0
                  origination_fee: 0
                  repayment_frequency: monthly
                  late_payment_fee: 0
                  term: 36
  /applications/{application_id}/reject:
    post:
      description: >-
        Updates the status of a credit application to `rejected` and returns a
        user readable rejection reason, to be used in the adverse action notice
      operationId: applications_reject
      tags:
        - Applications
      parameters:
        - name: application_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ApplicationId'
          examples:
            Example1:
              value: app_f0467657bba948e6a87292e182132848
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
              examples:
                Example1:
                  value:
                    rejection_reasons:
                      - bank_balance_too_low
                    id: app_f0467657bba948e6a87292e182132848
                    borrower_id: bor_1677bbbaf21a4954bb114bd9c4348d8a
                    credit_type: consumer_installment_loan
                    status: rejected
                    created_on: '2022-12-31T02:20:35.934Z'
                    decisioned_on: '2022-12-31T02:21:01.842Z'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Reject an application
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                rejection_reasons:
                  type: array
                  items:
                    $ref: '#/components/schemas/RejectionReason'
              required:
                - rejection_reasons
            examples:
              Example1:
                value:
                  rejection_reasons:
                    - bank_balance_too_low
  /applications/{application_id}:
    get:
      description: Get an application by its id
      operationId: applications_get
      tags:
        - Applications
      parameters:
        - name: application_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ApplicationId'
          examples:
            Example1:
              value: app_f0467657bba948e6a87292e182132848
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
              examples:
                Example1:
                  value:
                    id: app_f0467657bba948e6a87292e182132848
                    borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                    credit_type: consumer_revolving_line_of_credit
                    rejection_reasons: []
                    status: approved
                    created_on: '2022-12-31T01:36:52.606Z'
                    decisioned_on: '2023-01-17T05:31:52.955Z'
                    offer:
                      - type: line_of_credit
                        amount: 1000000
                        apr: 0
                        annual_fee: 0
                        billing_cycle: 30
                        finance_charge: 0
                        grace_period: 21
                        grace_period_interest_rate: 0
                        interest_rate: 0
                        late_payment_fee: 0
                        origination_fee: 0
                        term: 24
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Get an application by ID
      security: *ref_0
  /borrowers/business:
    post:
      description: Creates a business borrower. Business borrowers must have a unique EIN.
      operationId: borrowers_createBusinessBorrower
      tags:
        - Borrowers
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessBorrower'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Market St
                      line_2: null
                      city: San Francisco
                      state: NJ
                      zip: '94133'
                    business_contact:
                      first_name: alex
                      last_name: montana
                      phone: '4155555555'
                      email: alex@acme.co
                      title: COO
                    beneficial_owners:
                      - address:
                          line_1: 15 Market St
                          line_2: null
                          city: San Francisco
                          state: CA
                          zip: '91133'
                        date_of_birth: '1991-12-18'
                        email: jdoe@acme.com
                        first_name: Jane
                        last_name: Dough
                        percent_ownership: 2500
                        phone: '4155555555'
                        ssn: '123456789'
                        id: 63ae91f8eae458cb0d79f77e
                    id: bor_18e5a3726b3943cda2635f40e1041ba4
                    business_name: Apple Landscaping
                    business_type: corporation
                    dba_name: Apple Landscaping
                    ein: '130256721'
                    incorporation_date: '2000-12-12'
                    kyb_completion_date: '2022-11-15'
                    phone: '4152556465'
                    state_of_incorporation: DE
                    created_on: '2022-12-30T07:23:36.665Z'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Create a business borrower
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BusinessBorrowerRequest'
            examples:
              Example1:
                value:
                  address:
                    line_1: 15 Market St
                    line_2: null
                    city: San Francisco
                    state: NJ
                    zip: '94133'
                  business_contact:
                    first_name: alex
                    last_name: montana
                    phone: '4155555555'
                    email: alex@acme.co
                    title: COO
                  beneficial_owners:
                    - address:
                        line_1: 15 Market St
                        line_2: null
                        city: San Francisco
                        state: CA
                        zip: '91133'
                      date_of_birth: '1991-12-18'
                      email: jdoe@acme.com
                      first_name: Jane
                      last_name: Dough
                      percent_ownership: 2500
                      phone: '4155555555'
                      ssn: '123456789'
                      id: 63ae91f8eae458cb0d79f77e
                  business_name: Apple Landscaping
                  business_type: corporation
                  dba_name: Apple Landscaping
                  ein: '130256721'
                  incorporation_date: '2000-12-12'
                  kyb_completion_date: '2022-11-15'
                  phone: '4152556465'
                  state_of_incorporation: DE
  /borrowers/business/{borrower_id}:
    patch:
      description: >-
        Updates an existing borrower. The full borrower object needs to be
        supplied in the update request.
      operationId: borrowers_updateBusinessBorrower
      tags:
        - Borrowers
      parameters:
        - name: borrower_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/BusinessBorrowerId'
          examples:
            Example1:
              value: bor_18e5a3726b3943cda2635f40e1041ba4
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessBorrower'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Market St
                      line_2: null
                      city: San Francisco
                      state: NJ
                      zip: '94133'
                    business_contact:
                      first_name: alex
                      last_name: montana
                      phone: '4155555555'
                      email: alex@acme.co
                      title: COO
                    beneficial_owners:
                      - address:
                          line_1: 15 Market St
                          line_2: null
                          city: San Francisco
                          state: CA
                          zip: '91133'
                        date_of_birth: '1991-12-18'
                        email: jdoe@acme.com
                        first_name: Jane
                        last_name: Dough
                        percent_ownership: 2500
                        phone: '4155555555'
                        ssn: '123456789'
                        id: 63ae91f8eae458cb0d79f77e
                    id: bor_18e5a3726b3943cda2635f40e1041ba4
                    business_name: Apple Landscaping
                    business_type: corporation
                    dba_name: Apple Landscaping
                    ein: '130256721'
                    incorporation_date: '2000-12-12'
                    kyb_completion_date: '2022-11-15'
                    phone: '4152556465'
                    state_of_incorporation: DE
                    created_on: '2022-12-30T07:23:36.665Z'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Update a business borrower
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BusinessBorrowerRequest'
            examples:
              Example1:
                value:
                  address:
                    line_1: 15 Market St
                    line_2: null
                    city: San Francisco
                    state: NJ
                    zip: '94133'
                  business_contact:
                    first_name: alex
                    last_name: montana
                    phone: '4155555555'
                    email: alex@acme.co
                    title: COO
                  beneficial_owners:
                    - address:
                        line_1: 15 Market St
                        line_2: null
                        city: San Francisco
                        state: CA
                        zip: '91133'
                      date_of_birth: '1991-12-18'
                      email: jdoe@acme.com
                      first_name: Jane
                      last_name: Dough
                      percent_ownership: 2500
                      phone: '4155555555'
                      ssn: '123456789'
                      id: 63ae91f8eae458cb0d79f77e
                  business_name: Apple Landscaping
                  business_type: corporation
                  dba_name: Apple Landscaping
                  ein: '130256721'
                  incorporation_date: '2000-12-12'
                  kyb_completion_date: '2022-11-15'
                  phone: '4152556465'
                  state_of_incorporation: DE
  /borrowers/consumer:
    post:
      description: >-
        Create a consumer borrower. The created consumer resource is returned in
        the response.
      operationId: borrowers_createConsumerBorrower
      tags:
        - Borrowers
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsumerBorrowerResponse'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Main Street
                      line_2: null
                      city: Austin
                      state: TX
                      zip: '73301'
                    id: bor_a1d0c30d77104f35b4c842b99132624e
                    date_of_birth: '1991-12-18'
                    email: jdough@acme.co
                    first_name: Jane
                    last_name: Dough
                    kyc_completion_date: '2022-11-15'
                    created_on: '2022-12-31T00:58:47.828Z'
                    phone: '2065886919'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Create a consumer borrower
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConsumerBorrowerRequest'
            examples:
              Example1:
                value:
                  address:
                    line_1: 15 Main Street
                    line_2: Unit 204
                    city: Austin
                    state: TX
                    zip: '73301'
                  date_of_birth: '1991-12-18'
                  email: jdough@acme.co
                  first_name: Jane
                  last_name: Dough
                  ssn: '999888777'
                  kyc_completion_date: '2022-11-15'
                  phone: '2065886919'
  /borrowers/consumer/{borrower_id}:
    patch:
      operationId: borrowers_updateConsumerBorrower
      tags:
        - Borrowers
      parameters:
        - name: borrower_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ConsumerBorrowerId'
          examples:
            Example1:
              value: bor_a1d0c30d77104f35b4c842b99132624e
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsumerBorrowerResponse'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Main Street
                      line_2: null
                      city: Austin
                      state: TX
                      zip: '73301'
                    id: bor_a1d0c30d77104f35b4c842b99132624e
                    date_of_birth: '1991-12-18'
                    email: jdough@acme.co
                    first_name: Jane
                    last_name: Dough
                    kyc_completion_date: '2022-11-15'
                    created_on: '2022-12-31T00:58:47.828Z'
                    phone: '2065886919'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Update a consumer borrower
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConsumerBorrowerRequest'
            examples:
              Example1:
                value:
                  address:
                    line_1: 15 Main Street
                    line_2: Unit 204
                    city: Austin
                    state: TX
                    zip: '73301'
                  date_of_birth: '1991-12-18'
                  email: jdough@acme.co
                  first_name: Jane
                  last_name: Dough
                  ssn: '999888777'
                  kyc_completion_date: '2022-11-15'
                  phone: '2065886919'
  /borrowers/{borrower_id}:
    get:
      description: Retrieve one borrower by id
      operationId: borrowers_getBorrower
      tags:
        - Borrowers
      parameters:
        - name: borrower_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/ConsumerBorrowerId'
          examples:
            Example1:
              value: bor_a1d0c30d77104f35b4c842b99132624e
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsumerBorrowerResponse'
              examples:
                Example1:
                  value:
                    address:
                      line_1: 15 Main Street
                      line_2: null
                      city: Austin
                      state: TX
                      zip: '73301'
                    id: bor_a1d0c30d77104f35b4c842b99132624e
                    date_of_birth: '1991-12-18'
                    email: jdough@acme.co
                    first_name: Jane
                    last_name: Dough
                    kyc_completion_date: '2022-11-15'
                    created_on: '2022-12-31T00:58:47.828Z'
                    phone: '2065886919'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Retrieve a borrower by id
      security: *ref_0
  /borrowers:
    get:
      description: Retrieve all borrowers associated with your account
      operationId: borrowers_listAllBorrowers
      tags:
        - Borrowers
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Borrower'
              examples:
                Example1:
                  value:
                    - type: business
                      address:
                        line_1: 15 Market St
                        line_2: null
                        city: San Francisco
                        state: NJ
                        zip: '94133'
                      business_contact:
                        first_name: alex
                        last_name: montana
                        phone: '4155555555'
                        email: alex@acme.co
                        title: COO
                      beneficial_owners:
                        - address:
                            line_1: 15 Market St
                            line_2: null
                            city: San Francisco
                            state: CA
                            zip: '91133'
                          date_of_birth: '1991-12-18'
                          email: jdoe@acme.com
                          first_name: Jane
                          last_name: Dough
                          percent_ownership: 2500
                          phone: '4155555555'
                          ssn: '123456789'
                          id: 63ae91f8eae458cb0d79f77e
                      id: bor_18e5a3726b3943cda2635f40e1041ba4
                      business_name: Apple Landscaping
                      business_type: corporation
                      dba_name: Apple Landscaping
                      ein: '130256721'
                      incorporation_date: '2000-12-12'
                      kyb_completion_date: '2022-11-15'
                      phone: '4152556465'
                      state_of_incorporation: DE
                      created_on: '2022-12-30T07:23:36.665Z'
                    - type: consumer
                      address:
                        line_1: 15 Main Street
                        line_2: Unit 204
                        city: Austin
                        state: TX
                        zip: '73301'
                      date_of_birth: '1991-12-18'
                      email: jdough@acme.co
                      first_name: Jane
                      last_name: Dough
                      ssn: '999888777'
                      kyc_completion_date: '2022-11-15'
                      phone: '2065886919'
                      id: bor_a1d0c30d77104f35b4c842b99132624e
                      created_on: '2022-12-30T07:23:36.665Z'
      summary: List all borrowers
      security: *ref_0
  /configuration/webhook:
    post:
      operationId: configuration_create
      tags:
        - Configuration
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: string
              examples:
                Example1:
                  value: Ok.
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Set webhook URL
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                url:
                  type: string
                  description: The `url` to send webhooks to
                  example: https://example.com/webhook
              required:
                - url
            examples:
              Example1:
                value:
                  url: https://example.com/webhook
    delete:
      operationId: configuration_delete
      tags:
        - Configuration
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: string
              examples:
                Example1:
                  value: Ok.
      summary: Remove a webhook
      security: *ref_0
  /coverage/commercial:
    get:
      description: Retrieve state-by-state commercial coverage
      operationId: coverage_retrieveCommercialCoverage
      tags:
        - Coverage
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  $ref: '#/components/schemas/CommercialCoverage'
              examples:
                Example1:
                  value:
                    AL:
                      limit_1:
                        amount:
                          min: 500000
                          max: 25000000
                      max_apr: 9999
                      business_types:
                        - corporation
                        - partnership
                        - llc
                        - sole_proprietorship
      summary: Retrieve commercial lending coverage
      security: *ref_0
  /coverage/consumer:
    get:
      description: Retrieve state-by-state consumer coverage list
      operationId: coverage_retrieveConsumerCoverage
      tags:
        - Coverage
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  $ref: '#/components/schemas/ConsumerCoverage'
              examples:
                Example1:
                  value:
                    AL:
                      limit_1:
                        amount:
                          min: 150000
                          max: 5000000
                      max_apr: 0
      summary: Retrieve consumer lending coverage
      security: *ref_0
  /rejection_reasons:
    get:
      description: >-
        Retrieve a list of valid reasons to reject an applicant, along with
        descriptions for each reason
      operationId: coverage_retrieveRejectionReasons
      tags:
        - Coverage
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetrieveRejectionReasonsResponse'
              examples:
                Example1:
                  value:
                    income_too_low: |
                      Income does not meet requirement
                    bank_balance_too_low: |
                      Bank account balance is too low
                    income_unpredictable: |
                      Unable to predict regular pattern of income deposits
                    user_account_duplicate: >
                      Duplicate account (previously applied for a loan with a
                      different email address)
                    sdb_check_failed: |
                      State database lending restriction
                    bank_account_linking_error: |
                      Unable to link to a supported banking institution
                    mla_failed: >
                      Under the Military Lending Act, loans to military
                      personnel or their spouses and dependents cannot be made
                      if the interest and expenses associated with the loan
                      exceed an annual percentage rate (APR) of 36%. Due to
                      these limits on military-related lending, we can't lend to
                      members of the military or their spouses and dependents.
                      Please feel free to contact us with any questions you may
                      have about this notice!
                    iddoc_failed: |
                      Unable to verify identification documents
                    no_checking_or_savings_data: >
                      No data from supported financial institution. Unsupported
                      financial institution is linked
                    insufficient_bank_history: |
                      Unable to pull enough bank history
                    loan_location_no_license: >
                      Unable to verify that your permanent residence is in a
                      state
                    address_invalid: |
                      Unable to verify mailing address
                    income_verification_failed: |
                      Unable to verify qualified income over a sustained period
                    stacking_behavior: >
                      Recent deposits and withdrawals detected from other
                      lenders
                    ssn_verification_failed: |
                      Unable to verify SSN number
                    too_many_nsfs: >
                      Multiple Returned checks or Insufficient Fund Fees
                      detected
                    fraud_risk_too_high: |
                      Bank account has been flagged as potential fraud risk
                    bankruptcy: |
                      Outstanding balance from previous loan
                    processor_suspended: |
                      Payment processor is unable to authenticate user
                    cash_flow_verification_failed: >
                      Cash flow analysis - income funds are quickly depleted
                      from bank account after income deposit
      summary: Retrieve rejection reasons
      security: *ref_0
  /facilities:
    post:
      description: >-
        A facility can be created for a given loan agreement with a status of
        `signed`
      operationId: facilities_create
      tags:
        - Facilities
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Facility'
              examples:
                Example1:
                  value:
                    terms:
                      type: loan
                      amount: 1000000
                      grace_period: 0
                      grace_period_interest_rate: 0
                      interest_rate: 0
                      origination_fee: 0
                      repayment_frequency: monthly
                      late_payment_fee: 0
                      term: 36
                    id: fac_7264c6575a894548a386939434b0adf3
                    application_id: app_ad1564ffb1d745f9ad482bb5182708e2
                    borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                    loan_agreement_id: doc_234259b117854d0194bc5864a6c45b42
                    credit_type: consumer_installment_loan
                    status: active
                    created_on: '2023-05-12T19:46:09.293Z'
                    account_number: '401542198'
                    balance: 5000000
                    payoff_balance: 5000000
                    origination_date: '2023-05-12'
                    disbursement_date: '2023-05-12'
                    remaining_term: 48
                    payments_due: []
                    monthly_payment: 124425
                    next_payment_amount: 124425
                    next_payment_due_date: '2023-06-12'
                    current_payment_due_date: '2023-06-12'
                    last_payment_date: null
                    principal_paid_thru: '2023-05-11'
                    next_billing_date: '2023-05-28'
                    interest_accrued_thru: '2023-05-11'
                    next_accrual_cutoff_date: '2023-06-11'
                    scheduled_payoff_date: '2027-05-12'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Create a facility
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                loan_agreement_id:
                  $ref: '#/components/schemas/LoanAgreementId'
                  description: >-
                    The `loan_agreement_id` of the loan agreement to create a
                    facility for
              required:
                - loan_agreement_id
            examples:
              Example1:
                value:
                  loan_agreement_id: doc_234259b117854d0194bc5864a6c45b42
    get:
      description: List all facilities on your account
      operationId: facilities_listAll
      tags:
        - Facilities
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Facility'
              examples:
                Example1:
                  value:
                    - terms:
                        type: loan
                        amount: 1000000
                        grace_period: 0
                        grace_period_interest_rate: 0
                        interest_rate: 0
                        origination_fee: 0
                        repayment_frequency: monthly
                        late_payment_fee: 0
                        term: 36
                      id: fac_7264c6575a894548a386939434b0adf3
                      application_id: app_ad1564ffb1d745f9ad482bb5182708e2
                      borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                      loan_agreement_id: doc_234259b117854d0194bc5864a6c45b42
                      credit_type: consumer_installment_loan
                      status: active
                      created_on: '2023-05-12T19:46:09.293Z'
                      account_number: '401542198'
                      balance: 5000000
                      payoff_balance: 5000000
                      origination_date: '2023-05-12'
                      disbursement_date: '2023-05-12'
                      remaining_term: 48
                      payments_due: []
                      monthly_payment: 124425
                      next_payment_amount: 124425
                      next_payment_due_date: '2023-06-12'
                      current_payment_due_date: '2023-06-12'
                      last_payment_date: null
                      principal_paid_thru: '2023-05-11'
                      next_billing_date: '2023-05-28'
                      interest_accrued_thru: '2023-05-11'
                      next_accrual_cutoff_date: '2023-06-11'
                      scheduled_payoff_date: '2027-05-12'
      summary: List all facilities
      security: *ref_0
  /facilities/{facility_id}/disbursements:
    post:
      description: Create a disbursement for a facility
      operationId: facilities_disburse
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: fac_234259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Disbursement'
              examples:
                Example1:
                  value:
                    id: dsb_234259b117854d0194bc5864a6c45b42
                    facility_id: fac_234259b117854d0194bc5864a6c45b42
                    amount: 100000
                    status: pending
                    created_on: '2023-02-27T00:00:00Z'
                    transfer_type: standard
      summary: Create a disbursement for a facility
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DisbursementRequest'
            examples:
              Example1:
                value:
                  amount: 100000
                  disbursement_bank_account:
                    bank_account_number: '1234567890'
                    bank_routing_number: '021000012'
                    type: checking
                  transfer_type: standard
    get:
      description: List disbursements for a facility
      operationId: facilities_listDisbursementsForFacility
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          description: The facility_id of the facility you want to list disbursements for
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: fac_234259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Disbursement'
              examples:
                Example1:
                  value:
                    - id: dsb_234259b117854d0194bc5864a6c45b42
                      facility_id: fac_234259b117854d0194bc5864a6c45b42
                      amount: 100000
                      status: pending
                      created_on: '2023-02-27T00:00:00Z'
                      transfer_type: standard
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: List disbursements for a facility
      security: *ref_0
  /facilities/{facility_id}/close:
    post:
      description: Closes an active facility by setting its status to `closed`
      operationId: facilities_close
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: fac_234259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Facility'
              examples:
                Example1:
                  value:
                    terms:
                      type: loan
                      amount: 1000000
                      grace_period: 0
                      grace_period_interest_rate: 0
                      interest_rate: 0
                      origination_fee: 0
                      repayment_frequency: monthly
                      late_payment_fee: 0
                      term: 36
                    id: fac_7264c6575a894548a386939434b0adf3
                    application_id: app_ad1564ffb1d745f9ad482bb5182708e2
                    borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                    loan_agreement_id: doc_234259b117854d0194bc5864a6c45b42
                    credit_type: consumer_installment_loan
                    created_on: '2023-01-17T04:59:21.773Z'
                    status: closed
                    account_number: '401542198'
                    balance: 5000000
                    payoff_balance: 5000000
                    origination_date: '2023-05-12'
                    disbursement_date: '2023-05-12'
                    remaining_term: 48
                    payments_due: []
                    monthly_payment: 124425
                    next_payment_amount: 124425
                    next_payment_due_date: '2023-06-12'
                    current_payment_due_date: '2023-06-12'
                    last_payment_date: null
                    principal_paid_thru: '2023-05-11'
                    next_billing_date: '2023-05-28'
                    interest_accrued_thru: '2023-05-11'
                    next_accrual_cutoff_date: '2023-06-11'
                    scheduled_payoff_date: '2027-05-12'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Close a facility
      security: *ref_0
  /facilities/{facility_id}/enable_autopay:
    post:
      description: Enables autopay for a facility
      operationId: facilities_enable_autopay
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: fac_234259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Facility'
              examples:
                Example1:
                  value:
                    terms:
                      type: loan
                      amount: 1000000
                      grace_period: 0
                      grace_period_interest_rate: 0
                      interest_rate: 0
                      origination_fee: 0
                      repayment_frequency: monthly
                      late_payment_fee: 0
                      term: 36
                    id: fac_7264c6575a894548a386939434b0adf3
                    application_id: app_ad1564ffb1d745f9ad482bb5182708e2
                    borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                    loan_agreement_id: doc_234259b117854d0194bc5864a6c45b42
                    credit_type: consumer_installment_loan
                    status: active
                    created_on: '2023-05-12T19:46:09.293Z'
                    account_number: '401542198'
                    balance: 5000000
                    payoff_balance: 5000000
                    origination_date: '2023-05-12'
                    disbursement_date: '2023-05-12'
                    remaining_term: 48
                    payments_due: []
                    monthly_payment: 124425
                    next_payment_amount: 124425
                    next_payment_due_date: '2023-06-12'
                    current_payment_due_date: '2023-06-12'
                    last_payment_date: null
                    principal_paid_thru: '2023-05-11'
                    next_billing_date: '2023-05-28'
                    interest_accrued_thru: '2023-05-11'
                    next_accrual_cutoff_date: '2023-06-11'
                    scheduled_payoff_date: '2027-05-12'
                    autopay:
                      authorized: true
                      bank_account:
                        bank_account_number: '98989898'
                        bank_routing_number: '021000021'
                        type: checking
                      authorization_timestamp: '2023-05-12T19:46:09.293Z'
                      additional_amount: 0
                      amount_type: statement_balance
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Enable autopay for a facility
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bank_account:
                  $ref: '#/components/schemas/BankAccount'
                  description: The bank account details to use for scheduled payments
                amount_type:
                  $ref: '#/components/schemas/AutopayAmountType'
                  description: >-
                    The type of autopay amount, either minimum_payment or
                    statement_balance
                additional_amount:
                  type: integer
                  description: >-
                    The additional amount to pay on top of the minimum payment,
                    in cents (e.g. 1000 = $10.00)
              required:
                - bank_account
                - amount_type
            examples:
              Example1:
                value:
                  bank_account:
                    bank_account_number: '1234567890'
                    bank_routing_number: '021000012'
                    type: checking
                  additional_amount: 0
                  amount_type: statement_balance
  /facilities/{facility_id}/disable_autopay:
    post:
      description: Disable autopay for a facility
      operationId: facilities_disable_autopay
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: fac_234259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Facility'
              examples:
                Example1:
                  value:
                    terms:
                      type: loan
                      amount: 1000000
                      grace_period: 0
                      grace_period_interest_rate: 0
                      interest_rate: 0
                      origination_fee: 0
                      repayment_frequency: monthly
                      late_payment_fee: 0
                      term: 36
                    id: fac_7264c6575a894548a386939434b0adf3
                    application_id: app_ad1564ffb1d745f9ad482bb5182708e2
                    borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                    loan_agreement_id: doc_234259b117854d0194bc5864a6c45b42
                    credit_type: consumer_installment_loan
                    status: active
                    created_on: '2023-05-12T19:46:09.293Z'
                    account_number: '401542198'
                    balance: 5000000
                    payoff_balance: 5000000
                    origination_date: '2023-05-12'
                    disbursement_date: '2023-05-12'
                    remaining_term: 48
                    payments_due: []
                    monthly_payment: 124425
                    next_payment_amount: 124425
                    next_payment_due_date: '2023-06-12'
                    current_payment_due_date: '2023-06-12'
                    last_payment_date: null
                    principal_paid_thru: '2023-05-11'
                    next_billing_date: '2023-05-28'
                    interest_accrued_thru: '2023-05-11'
                    next_accrual_cutoff_date: '2023-06-11'
                    scheduled_payoff_date: '2027-05-12'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Disable autopay for a facility
      security: *ref_0
  /facilities/{facility_id}/repayment_bank_details:
    post:
      description: Add repayment bank details for a facility
      operationId: facilities_addRepaymentBankDetails
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: fac_234259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Facility'
              examples:
                Example1:
                  value:
                    terms:
                      type: loan
                      amount: 1000000
                      grace_period: 0
                      grace_period_interest_rate: 0
                      interest_rate: 0
                      origination_fee: 0
                      repayment_frequency: monthly
                      late_payment_fee: 0
                      term: 36
                    id: fac_7264c6575a894548a386939434b0adf3
                    application_id: app_ad1564ffb1d745f9ad482bb5182708e2
                    borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                    loan_agreement_id: doc_234259b117854d0194bc5864a6c45b42
                    credit_type: consumer_installment_loan
                    status: active
                    created_on: '2023-05-12T19:46:09.293Z'
                    account_number: '401542198'
                    balance: 5000000
                    payoff_balance: 5000000
                    origination_date: '2023-05-12'
                    disbursement_date: '2023-05-12'
                    remaining_term: 48
                    payments_due: []
                    monthly_payment: 124425
                    next_payment_amount: 124425
                    next_payment_due_date: '2023-06-12'
                    current_payment_due_date: '2023-06-12'
                    last_payment_date: null
                    principal_paid_thru: '2023-05-11'
                    next_billing_date: '2023-05-28'
                    interest_accrued_thru: '2023-05-11'
                    next_accrual_cutoff_date: '2023-06-11'
                    scheduled_payoff_date: '2027-05-12'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Add repayment bank details for a facility
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bank_account_number:
                  type: string
                  description: The bank account number to use for scheduled payments
                  example: '1234567890'
                bank_routing_number:
                  type: string
                  description: The bank routing number to use for scheduled payments
                  example: '021000012'
                type:
                  type: string
                  description: The type of bank account to use for scheduled payments
                  example: checking
              required:
                - bank_account_number
                - bank_routing_number
                - type
            examples:
              Example1:
                value:
                  bank_account_number: '1234567890'
                  bank_routing_number: '021000012'
                  type: checking
  /facilities/{facility_id}:
    get:
      description: Retrieve a facility by its id
      operationId: facilities_get
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          description: The facility_id of the facility you want to retrieve
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: doc_234259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Facility'
              examples:
                Example1:
                  value:
                    terms:
                      type: loan
                      amount: 1000000
                      grace_period: 0
                      grace_period_interest_rate: 0
                      interest_rate: 0
                      origination_fee: 0
                      repayment_frequency: monthly
                      late_payment_fee: 0
                      term: 36
                    id: fac_7264c6575a894548a386939434b0adf3
                    application_id: app_ad1564ffb1d745f9ad482bb5182708e2
                    borrower_id: bor_d965bea9f47a4b108562642dbb1dae9f
                    loan_agreement_id: doc_234259b117854d0194bc5864a6c45b42
                    credit_type: consumer_installment_loan
                    status: active
                    created_on: '2023-05-12T19:46:09.293Z'
                    account_number: '401542198'
                    balance: 5000000
                    payoff_balance: 5000000
                    origination_date: '2023-05-12'
                    disbursement_date: '2023-05-12'
                    remaining_term: 48
                    payments_due: []
                    monthly_payment: 124425
                    next_payment_amount: 124425
                    next_payment_due_date: '2023-06-12'
                    current_payment_due_date: '2023-06-12'
                    last_payment_date: null
                    principal_paid_thru: '2023-05-11'
                    next_billing_date: '2023-05-28'
                    interest_accrued_thru: '2023-05-11'
                    next_accrual_cutoff_date: '2023-06-11'
                    scheduled_payoff_date: '2027-05-12'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Retrieve a facility
      security: *ref_0
  /facilities/disbursements:
    get:
      description: List disbursements for your account
      operationId: facilities_listDisbursements
      tags:
        - Facilities
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Disbursement'
              examples:
                Example1:
                  value:
                    - id: dsb_234259b117854d0194bc5864a6c45b42
                      facility_id: fac_234259b117854d0194bc5864a6c45b42
                      amount: 100000
                      status: pending
                      created_on: '2023-02-27T00:00:00Z'
                      transfer_type: standard
      summary: List all disbursements for your account
      security: *ref_0
  /facilities/{facility_id}/statements:
    get:
      description: List statements for a facility
      operationId: facilities_listStatementsForFacility
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          description: The facility_id of the facility you want to list statements for
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: fac_234259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Statement'
              examples:
                Example1:
                  value:
                    - id: stmt_deb6aba913d84feb987934f50c32bf03
                      statement_date: '2023-03-17'
                      facility_id: fac_234259b117854d0194bc5864a6c45b42
                      url: >-
                        https://app.docspring.com/submissions/sub_gjX2LS7c6FjqZt12hQ/download
                      created_on: '2023-02-27T00:00:00Z'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: List statements for a facility
      security: *ref_0
  /facilities/{facility_id}/disbursements/{disbursement_id}:
    get:
      description: Retrieve a disbursement by its id
      operationId: facilities_getDisbursementById
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          description: The facility_id of the facility you want to retrieve
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: fac_234259b117854d0194bc5864a6c45b42
        - name: disbursement_id
          in: path
          description: The disbursement_id of the disbursement you want to retrieve
          required: true
          schema:
            $ref: '#/components/schemas/DisbursementId'
          examples:
            Example1:
              value: dsb_134259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Disbursement'
              examples:
                Example1:
                  value:
                    id: dsb_234259b117854d0194bc5864a6c45b42
                    facility_id: fac_234259b117854d0194bc5864a6c45b42
                    amount: 100000
                    status: pending
                    created_on: '2023-02-27T00:00:00Z'
                    transfer_type: standard
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Retrieve a disbursement by its id
      security: *ref_0
  /facilities/{facility_id}/payoff_amounts:
    get:
      description: >-
        Retrieve a list of payoff amount/date pairs for a facility for the next
        10 days
      operationId: facilities_getPayoffAmounts
      tags:
        - Facilities
      parameters:
        - name: facility_id
          in: path
          description: >-
            The facility_id of the facility you want to retrieve payoff amounts
            for
          required: true
          schema:
            $ref: '#/components/schemas/FacilityId'
          examples:
            Example1:
              value: fac_234259b117854d0194bc5864a6c45b42
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayoffAmounts'
              examples:
                Example1:
                  value:
                    - amount: 504889
                      date: '2023-12-08'
                    - amount: 505112
                      date: '2023-12-09'
                    - amount: 505334
                      date: '2023-12-10'
                    - amount: 505556
                      date: '2023-12-11'
                    - amount: 505778
                      date: '2023-12-12'
                    - amount: 506001
                      date: '2023-12-13'
                    - amount: 506223
                      date: '2023-12-14'
                    - amount: 506445
                      date: '2023-12-15'
                    - amount: 506667
                      date: '2023-12-16'
                    - amount: 506866
                      date: '2023-12-17'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Retrieve payoff amounts for a facility
      security: *ref_0
  /loan_agreements:
    post:
      description: >-
        A loan agreement can be created for an application with a status of
        approved. Expect 4-8 seconds of latency
      operationId: loanAgreements_create
      tags:
        - LoanAgreements
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoanAgreement'
              examples:
                Example1:
                  value:
                    status: pending_signature
                    id: doc_43da3b3f95c745e1985a71e9a00d6c27
                    application_id: app_a9d2f388030d4f4296f80fc327e08d0d
                    document_url: >-
                      https://production-formapi-docs.s3.amazonaws.com/store/acc_QqdcDH47A63qKZbK3S/templates/tpl_4zqGxezHzrfqDaxGr2/submissions/sub_J9PbHbXYbL4jzRxc3R.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJESVN6QC4ACN3XSQ%2F20221231%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20221231T204739Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=cf0c6429ef72ca06d861cb912f5d1cf376a5c26c7f904aaa9bf08f10103785bd
                    created_on: '2022-12-31T20:47:38.152Z'
                    signature_timestamp: null
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Create a loan agreement
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                application_id:
                  $ref: '#/components/schemas/ApplicationId'
                  description: >-
                    The `application_id` of the application to create the loan
                    agreement for
              required:
                - application_id
            examples:
              Example1:
                value:
                  application_id: app_a9d2f388030d4f4296f80fc327e08d0d
    get:
      description: List all loan agreements on your account
      operationId: loanAgreements_getAll
      tags:
        - LoanAgreements
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LoanAgreement'
              examples:
                Example1:
                  value:
                    - status: pending_signature
                      id: doc_43da3b3f95c745e1985a71e9a00d6c27
                      application_id: app_a9d2f388030d4f4296f80fc327e08d0d
                      document_url: >-
                        https://production-formapi-docs.s3.amazonaws.com/store/acc_QqdcDH47A63qKZbK3S/templates/tpl_4zqGxezHzrfqDaxGr2/submissions/sub_J9PbHbXYbL4jzRxc3R.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJESVN6QC4ACN3XSQ%2F20221231%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20221231T204739Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=cf0c6429ef72ca06d861cb912f5d1cf376a5c26c7f904aaa9bf08f10103785bd
                      created_on: '2022-12-31T20:47:38.152Z'
                      signature_timestamp: null
      summary: List all loan agreements
      security: *ref_0
  /loan_agreements/{loan_agreement_id}/sign:
    post:
      description: >-
        Electronically signs a loan document and updates the application's
        status to `accepted`
      operationId: loanAgreements_sign
      tags:
        - LoanAgreements
      parameters:
        - name: loan_agreement_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/LoanAgreementId'
          examples:
            Example1:
              value: doc_96d13bec673c4eba8d44c9cda3bbb811
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignLoanAgreementResponse'
              examples:
                Example1:
                  value:
                    status: signed
                    id: doc_96d13bec673c4eba8d44c9cda3bbb811
                    application_id: app_a9d2f388030d4f4296f80fc327e08d0d
                    signature_timestamp: '2022-12-31T21:10:47.610Z'
                    document_url: >-
                      https://production-formapi-docs.s3.amazonaws.com/store/acc_QqdcDH47A63qKZbK3S/templates/tpl_4zqGxezHzrfqDaxGr2/submissions/sub_jQRTtHgekEbdJTxtsR.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJESVN6QC4ACN3XSQ%2F20221231%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20221231T210718Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=9ead57dba9e8e2179a3e9950f1c7c19fe8b10dfbc55f5ce09228bd216e4cdd73
                    created_on: '2022-12-31T21:07:16.642Z'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Sign a loan agreement
      security: *ref_0
  /loan_agreements/{loan_agreement_id}:
    get:
      description: Retrieve a loan agreement by its id
      operationId: loanAgreements_get
      tags:
        - LoanAgreements
      parameters:
        - name: loan_agreement_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/LoanAgreementId'
          examples:
            Example1:
              value: doc_43da3b3f95c745e1985a71e9a00d6c27
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoanAgreement'
              examples:
                Example1:
                  value:
                    status: pending_signature
                    id: doc_43da3b3f95c745e1985a71e9a00d6c27
                    application_id: app_a9d2f388030d4f4296f80fc327e08d0d
                    document_url: >-
                      https://production-formapi-docs.s3.amazonaws.com/store/acc_QqdcDH47A63qKZbK3S/templates/tpl_4zqGxezHzrfqDaxGr2/submissions/sub_J9PbHbXYbL4jzRxc3R.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJESVN6QC4ACN3XSQ%2F20221231%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20221231T204739Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=cf0c6429ef72ca06d861cb912f5d1cf376a5c26c7f904aaa9bf08f10103785bd
                    created_on: '2022-12-31T20:47:38.152Z'
                    signature_timestamp: null
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Get a loan agreement by id
      security: *ref_0
  /payments:
    post:
      description: |
        Instructs Pier to initiate an ACH payment for a loan
      operationId: payments_submitPayment
      tags:
        - Payments
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
              examples:
                Example1:
                  value:
                    id: pmt_234259b117854d0194bc5864a6c45b42
                    amount: 100000
                    facility_id: fac_234259b117854d0194bc5864a6c45b42
                    status: pending
                    transfer_type: standard
                    created_on: '2023-02-27T00:00:00Z'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Submit a loan payment
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
            examples:
              Example1:
                value:
                  facility_id: fac_234259b117854d0194bc5864a6c45b42
                  amount: 100000
                  transfer_type: standard
    get:
      description: List all payments associated with your account
      operationId: payments_getAll
      tags:
        - Payments
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payment'
              examples:
                Example1:
                  value:
                    - id: pmt_234259b117854d0194bc5864a6c45b42
                      amount: 100000
                      facility_id: fac_234259b117854d0194bc5864a6c45b42
                      status: pending
                      transfer_type: standard
                      created_on: '2023-02-27T00:00:00Z'
                    - id: pmt_234259b117854d0194bc5864a6c45b42
                      amount: 100000
                      facility_id: fac_234259b117854d0194bc5864a6c45b42
                      status: processing
                      transfer_type: standard
                      created_on: '2023-02-27T00:00:00Z'
      summary: List all payments
      security: *ref_0
  /payments/{payment_id}:
    get:
      description: Get a payment by its id
      operationId: payments_get
      tags:
        - Payments
      parameters:
        - name: payment_id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/PaymentId'
          examples:
            Example1:
              value: pmt_18e5a3726b3943cda2635f40e1041ba4
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
              examples:
                Example1:
                  value:
                    id: pmt_234259b117854d0194bc5864a6c45b42
                    amount: 100000
                    facility_id: fac_234259b117854d0194bc5864a6c45b42
                    status: pending
                    transfer_type: standard
                    created_on: '2023-02-27T00:00:00Z'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorBody'
      summary: Get a payment by ID
      security: *ref_0
components:
  schemas:
    ApplicationId:
      title: ApplicationId
      type: string
    ApplicationStatus:
      title: ApplicationStatus
      type: string
      enum:
        - pending
        - approved
        - accepted
        - rejected
        - expired
    Offer:
      title: Offer
      oneOf:
        - type: object
          allOf:
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - line_of_credit
            - $ref: '#/components/schemas/LineOfCreditOffer'
          required:
            - type
        - type: object
          allOf:
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - loan
            - $ref: '#/components/schemas/LoanOffer'
          required:
            - type
    Application:
      title: Application
      type: object
      properties:
        id:
          $ref: '#/components/schemas/ApplicationId'
        borrower_id:
          $ref: '#/components/schemas/ConsumerBorrowerId'
          description: The `borrower_id` of the borrower the application belongs to
        created_on:
          type: string
          format: date-time
          description: Timestamp the application object is created on
        credit_type:
          $ref: '#/components/schemas/CreditType'
          description: The type of credit product.
        decisioned_on:
          type: string
          format: date-time
          description: Timestamp when the application is either approved or rejected on
        offer:
          type: array
          items:
            $ref: '#/components/schemas/Offer'
          description: >-
            If the application is approved, an object containing the credit
            offer details
        rejection_reasons:
          type: array
          items:
            $ref: '#/components/schemas/RejectionReason'
          description: >
            If the application is rejected, a list containing 1-4 rejection
            reason(s).  The Rejection Reasons endpoint provides a list of valid
            reasons and descriptors
        requested_amount:
          type: integer
          description: >
            If the borrower requests an amount in their application, the
            requested  loan or credit line amount in cents (e.g. 500000 for
            $5,000)
        status:
          $ref: '#/components/schemas/ApplicationStatus'
        third_party_disbursement_destination:
          type: string
          description: >-
            For credit applications of type `consumer_bnpl`, the third party
            (i.e. merchant) receiving the funds is specified here
      required:
        - status
    LineOfCreditOffer:
      title: LineOfCreditOffer
      type: object
      properties:
        amount:
          type: integer
          description: >-
            The amount (in cents) of the credit line offer (e.g. '200000' for
            $2,000.00)
        apr:
          type: integer
          description: The annual percentage rate (in basis points) of the credit line
        annual_fee:
          type: integer
          description: The annual fee charged for the credit line (e.g. '5000' for $50.00)
        billing_cycle:
          type: integer
          description: >
            The time in days between the last statement's closing date and the
            next statement's closing date. 

            For consumer lines of credit, the minimum is '21'
        finance_charge:
          type: integer
          description: >-
            If your platform charges a monthly finance charge for access to the
            line, the amount in cents
        grace_period:
          type: integer
          description: >-
            The time in days between the end of a billing cycle and the bill's
            due date. For consumer lines of credit, the minimum is '21'
        grace_period_interest_rate:
          type: integer
          description: >-
            The interest rate (in basis points) charged during the grace period.
            Must be '0' for consumer lines of credit. Defaults to `0` if omitted
        interest_rate:
          type: integer
          description: >-
            The interest rate (in basis points) of the loan or credit line offer
            (e.g. '750' for 7.50%)
        introductory_offer_interest_rate:
          type: integer
          description: >-
            If you offer an introductory period with a reduced interest rate,
            the interest rate in basis points
        introductory_offer_interest_rate_term:
          type: integer
          description: >-
            If you offer an introductory period with a reduced interest rate,
            the term in months
        late_payment_fee:
          type: integer
          description: >-
            The fee charged if a borrower misses the payment due date, in cents
            (e.g. '2500' for $25.00)
        minimum_payment:
          $ref: '#/components/schemas/MinimumPayment'
          description: The minimum payment due each billing cycle
        origination_fee:
          type: integer
          description: >-
            The origination fee charged to originate the line in basis points
            (e.g. '150' for 1.50%)
        term:
          type: integer
          description: The term of the line in months
      required:
        - amount
        - annual_fee
        - interest_rate
    LoanOffer:
      title: LoanOffer
      type: object
      properties:
        amount:
          type: integer
          description: The amount (in cents) of the loan offer (e.g. 200000 for $2,000.00)
        grace_period:
          type: integer
          description: >-
            If offering an introductory grace period where payments wont be
            required, the period in months
        grace_period_interest_rate:
          type: integer
          description: >-
            If offering an introductory grace period where payments wont be
            required, the interest rate in basis points
        interest_rate:
          type: integer
          description: >-
            The interest rate (in basis points) charged on the loan principal
            (e.g. 750 for 7.50%)
        origination_fee:
          type: integer
          description: >-
            The origination fee charged to originate the loan in basis points
            (e.g. 150 for 1.50%)
        repayment_frequency:
          $ref: '#/components/schemas/RepaymentFrequency'
          description: >-
            The repayment frequency for the loan. Accepted values weekly,
            biweekly, monthly, semi_monthly_first_15th, semi_monthly_last_15th,
            semi_monthly
        first_payment_date:
          type: string
          description: The date of the first payment, in ISO 8601 format (e.g. 2022-12-31)
        late_payment_fee:
          type: integer
          description: >-
            The fee charged if a borrower misses the payment due date, in cents
            (e.g. 2500 for $25.00)
        term:
          type: integer
          description: >-
            The term of the loan as a number of payments (e.g. 12 for a loan
            with a monthly repayment frequency would represent 1 year)
      required:
        - amount
        - interest_rate
        - origination_fee
        - repayment_frequency
        - term
    RepaymentFrequency:
      title: RepaymentFrequency
      type: string
      enum:
        - weekly
        - biweekly
        - monthly
        - semi_monthly_first_15th
        - semi_monthly_last_15th
        - semi_monthly
    MinimumPayment:
      title: MinimumPayment
      type: object
      properties:
        type:
          $ref: '#/components/schemas/MinimumPaymentType'
          description: >-
            The type of minimum payment structure. Accepted values are
            interest_plus_percentage_of_principal
        value:
          type: integer
          description: >-
            The minimum payment percentage due each billing cycle (e.g. 500 for
            5.00%)
      required:
        - type
        - value
    MinimumPaymentType:
      title: MinimumPaymentType
      type: string
      enum:
        - interest_plus_percentage_of_principal
    RejectionReason:
      title: RejectionReason
      type: string
      enum:
        - income_too_low
        - bank_balance_too_low
        - income_unpredictable
        - user_account_duplicate
        - sdb_check_failed
        - bank_account_linking_error
        - mla_failed
        - iddoc_failed
        - no_checking_or_savings_data
        - insufficient_bank_history
        - loan_location_no_license
        - address_invalid
        - income_verification_failed
        - stacking_behavior
        - ssn_verification_failed
        - too_many_nsfs
        - fraud_risk_too_high
        - bankruptcy
        - processor_suspended
        - cash_flow_verification_failed
    GetApplicationRequest:
      title: GetApplicationRequest
      type: object
      properties:
        application_id:
          type: string
          description: The id of the borrower you're requesting to retrieve
      required:
        - application_id
    BusinessBorrowerId:
      title: BusinessBorrowerId
      type: string
    BeneficialOwnerId:
      title: BeneficialOwnerId
      type: string
    ConsumerBorrowerId:
      title: ConsumerBorrowerId
      type: string
    Borrower:
      title: Borrower
      oneOf:
        - type: object
          allOf:
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - business
            - $ref: '#/components/schemas/BusinessBorrower'
          required:
            - type
        - type: object
          allOf:
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - consumer
            - $ref: '#/components/schemas/ConsumerBorrower'
          required:
            - type
    BusinessBorrowerRequest:
      title: BusinessBorrowerRequest
      type: object
      properties:
        address:
          $ref: '#/components/schemas/Address'
          description: The address of the business.
        beneficial_owners:
          type: array
          items:
            $ref: '#/components/schemas/BeneficialOwners'
          description: >
            An array of objects representing owners of the business and those
            who control the funds of the business. 

            If no one owns more than 25% of the business, just the individual
            who has ultimate control of the funds must be included. 

            A maximum of 5 objects can be added.
        business_contact:
          $ref: '#/components/schemas/BusinessContact'
          description: The person executing the loan agreement.
        business_name:
          type: string
          description: Legal name of the business.
          example: Apple Landscaping
        business_type:
          $ref: '#/components/schemas/BusinessType'
          description: The type of business entity.
        dba_name:
          type: string
          description: Doing-business-as name of the business
          example: Apple Landscaping
        ein:
          type: string
          description: >-
            9-digit IRS employee identification number of the business (e.g.
            345543221)
          example: '130256721'
        incorporation_date:
          type: string
          description: Incorporation date of the business (YYYY-MM-DD)
          example: '2000-12-12'
        kyb_completion_date:
          type: string
          description: Date kyb completed on the business (YYYY-MM-DD)
          example: '2022-11-15'
        state_of_incorporation:
          type: string
          description: Required 2-digit US state code (e.g. CA, IL, FL, )
          example: DE
        phone:
          type: string
          description: The phone number of the business
          example: '4152556465'
      required:
        - address
        - beneficial_owners
        - business_contact
        - business_name
        - business_type
        - dba_name
        - ein
        - incorporation_date
        - kyb_completion_date
        - state_of_incorporation
        - phone
    BusinessBorrower:
      title: BusinessBorrower
      type: object
      properties:
        id:
          $ref: '#/components/schemas/BusinessBorrowerId'
        address:
          $ref: '#/components/schemas/Address'
        beneficial_owners:
          type: array
          items:
            $ref: '#/components/schemas/BeneficialOwners'
          description: >
            An array of objects representing owners of the business and those
            who control the funds of the business. 

            If no one owns more than 25% of the business, just the individual
            who has ultimate control of the funds must be included. 

            A maximum of 5 objects can be added.
        business_contact:
          $ref: '#/components/schemas/BusinessContact'
          description: The person executing the loan agreement.
        business_name:
          type: string
          description: Legal name of the business
          example: Apple Landscaping
        business_type:
          $ref: '#/components/schemas/BusinessType'
          description: The type of business entity.
        created_on:
          type: string
          description: Time stamp of borrower's creation date
          example: '2022-12-30T07:23:36.665Z'
        dba_name:
          type: string
          description: Doing-business-as name of the business
          example: Apple Landscaping
        ein:
          type: string
          description: >-
            9-digit IRS employee identification number of the business (e.g.
            345543221)
          example: '130256721'
        incorporation_date:
          type: string
          description: Incorporation date of the business (YYYY-MM-DD)
          example: '2000-12-12'
        kyb_completion_date:
          type: string
          description: Date kyb completed on the business (YYYY-MM-DD)
          example: '2022-11-15'
        phone:
          type: string
          description: The phone number of the business
          example: '4152556465'
        state_of_incorporation:
          type: string
          description: Required 2-digit US state code (e.g. CA, IL, FL, )
          example: DE
      required:
        - id
        - address
        - beneficial_owners
        - business_contact
        - business_name
        - business_type
        - created_on
        - dba_name
        - ein
        - incorporation_date
        - kyb_completion_date
        - phone
        - state_of_incorporation
    BeneficialOwners:
      title: BeneficialOwners
      type: object
      description: >-
        A person who owns owns 25% or more of the business as well as those who
        control the funds.
      properties:
        id:
          $ref: '#/components/schemas/BeneficialOwnerId'
        address:
          $ref: '#/components/schemas/Address'
          description: The person's address.
        date_of_birth:
          type: string
          description: The person's date of birth (YYYY-MM-DD)
        email:
          type: string
          description: The person's valid email address
        first_name:
          type: string
          description: The person's first name
        last_name:
          type: string
          description: The person's last name
        phone:
          type: string
          description: The person's 10-digit US phone number (e.g. 4152251000)
        percent_ownership:
          type: integer
          description: >-
            The percent ownership the person has in the business in basis points
            (e.g. 2500 for 25%)
        ssn:
          type: string
          description: The person's 9-digit US social security number (e.g. 123456789)
      required:
        - id
        - address
        - date_of_birth
        - email
        - first_name
        - last_name
        - phone
        - percent_ownership
        - ssn
    BusinessContact:
      title: BusinessContact
      type: object
      properties:
        first_name:
          type: string
        last_name:
          type: string
        phone:
          type: string
        email:
          type: string
        title:
          type: string
      required:
        - first_name
        - last_name
        - phone
        - email
        - title
    BusinessType:
      title: BusinessType
      type: string
      enum:
        - corporation
        - llc
        - partnership
        - sole_proprietorship
    ConsumerBorrowerRequest:
      title: ConsumerBorrowerRequest
      type: object
      properties:
        address:
          $ref: '#/components/schemas/Address'
          description: The address of the borrower
        date_of_birth:
          type: string
          description: The borrower's date of birth (YYYY-MM-DD)
          example: '1991-12-18'
        email:
          type: string
          description: The borrower's valid email address
          example: jdough@acme.co
        first_name:
          type: string
          description: The borrower's first name
          example: Jane
        last_name:
          type: string
          description: The borrower's last name
          example: Dough
        kyc_completion_date:
          type: string
          description: Date kyc completed on the borrower (YYYY-MM-DD)
          example: '2022-11-15'
        phone:
          type: string
          description: The borrower's 10-digit US phone number (e.g. 4152775050)
        ssn:
          type: string
          description: 9-digit social security number of the borrower (e.g. 345543221)
          example: '999888777'
      required:
        - address
        - date_of_birth
        - email
        - first_name
        - last_name
        - kyc_completion_date
        - ssn
    ConsumerBorrowerResponse:
      title: ConsumerBorrowerResponse
      type: object
      properties:
        address:
          $ref: '#/components/schemas/Address'
          description: The address of the borrower
        date_of_birth:
          type: string
          description: The borrower's date of birth (YYYY-MM-DD)
          example: '1991-12-18'
        id:
          $ref: '#/components/schemas/ConsumerBorrowerId'
          description: The ID of the borrower
        email:
          type: string
          description: The borrower's valid email address
          example: jdough@acme.co
        first_name:
          type: string
          description: The borrower's first name
          example: Jane
        last_name:
          type: string
          description: The borrower's last name
          example: Dough
        kyc_completion_date:
          type: string
          description: Date kyc completed on the borrower (YYYY-MM-DD)
          example: '2022-11-15'
        phone:
          type: string
          description: The borrower's 10-digit US phone number (e.g. 4152775050)
        created_on:
          type: string
          format: date-time
          description: The date the borrower was created
          example: '2022-12-31T00:58:47.828Z'
      required:
        - address
        - date_of_birth
        - id
        - email
        - first_name
        - last_name
        - kyc_completion_date
        - created_on
    ConsumerBorrower:
      title: ConsumerBorrower
      type: object
      properties:
        address:
          $ref: '#/components/schemas/Address'
          description: The address of the borrower
        date_of_birth:
          type: string
          description: The borrower's date of birth (YYYY-MM-DD)
          example: '1991-12-18'
        id:
          $ref: '#/components/schemas/ConsumerBorrowerId'
          description: The ID of the borrower
        email:
          type: string
          description: The borrower's valid email address
          example: jdough@acme.co
        first_name:
          type: string
          description: The borrower's first name
          example: Jane
        last_name:
          type: string
          description: The borrower's last name
          example: Dough
        kyc_completion_date:
          type: string
          description: Date kyc completed on the borrower (YYYY-MM-DD)
          example: '2022-11-15'
        phone:
          type: string
          description: The borrower's 10-digit US phone number (e.g. 4152775050)
        ssn:
          type: string
          description: 9-digit social security number of the borrower (e.g. 345543221)
          example: '999888777'
        created_on:
          type: string
          format: date-time
          description: The date the borrower was created
          example: '2022-12-31T00:58:47.828Z'
      required:
        - address
        - date_of_birth
        - id
        - email
        - first_name
        - last_name
        - kyc_completion_date
        - ssn
        - created_on
    RejectionType:
      title: RejectionType
      type: object
      properties:
        reason:
          type: string
        reason_message:
          type: string
      required:
        - reason
        - reason_message
    Address:
      title: Address
      type: object
      properties:
        line_1:
          type: string
        line_2:
          type: string
        city:
          type: string
        state:
          type: string
          description: 2-digit US state code (e.g. CA, IL, FL)
        zip:
          type: string
          description: 5-digit US zip code
      required:
        - line_1
        - city
        - state
        - zip
    Autopay:
      title: Autopay
      type: object
      properties:
        authorized:
          type: boolean
          description: a bollean indicating whether autopay is authorized
        authorization_timestamp:
          type: string
          format: date-time
          description: the timestamp when autopay was authorized
        bank_account:
          $ref: '#/components/schemas/BankAccount'
        amount_type:
          $ref: '#/components/schemas/AutopayAmountType'
          description: >-
            the type of autopay amount, either minimum_payment or
            statement_balance
        additional_amount:
          type: integer
          description: >-
            the additional amount to be paid on top of the minimum payment, in
            cents
      required:
        - authorized
        - authorization_timestamp
        - amount_type
    BankAccount:
      title: BankAccount
      type: object
      properties:
        bank_account_number:
          type: string
        bank_routing_number:
          type: string
        type:
          $ref: '#/components/schemas/BankAccountType'
          description: The type of bank account, either checking or savings
      required:
        - bank_account_number
        - bank_routing_number
        - type
    AutopayAmountType:
      title: AutopayAmountType
      type: string
      enum:
        - minimum_payment
        - statement_balance
    BankAccountType:
      title: BankAccountType
      type: string
      enum:
        - checking
        - savings
    TransferType:
      title: TransferType
      type: string
      enum:
        - standard
        - next_day
        - same_day
    TransferStatus:
      title: TransferStatus
      type: string
      enum:
        - pending
        - processing
        - settled
        - failed
        - cancelled
    CreditType:
      title: CreditType
      type: string
      enum:
        - consumer_installment_loan
        - consumer_bnpl
        - consumer_revolving_line_of_credit
        - consumer_closed_line_of_credit
        - consumer_secured_installment_loan
        - consumer_secured_revolving_line_of_credit
    ErrorBody:
      title: ErrorBody
      type: object
      properties:
        error_type:
          type: string
        error_code:
          type: string
        error_message:
          type: string
        error_detail:
          type: array
          items:
            $ref: '#/components/schemas/ErrorDetail'
      required:
        - error_type
        - error_code
        - error_message
    ErrorDetail:
      title: ErrorDetail
      type: object
      properties:
        value:
          type: string
        msg:
          type: string
        param:
          type: string
        location:
          type: string
      required:
        - value
        - msg
        - param
        - location
    CommercialCoverage:
      title: CommercialCoverage
      type: object
      properties:
        max_apr:
          type: integer
        business_types:
          type: array
          items:
            $ref: '#/components/schemas/BussinessType'
        limit_1:
          $ref: '#/components/schemas/CoverageLimit'
      required:
        - limit_1
    ConsumerCoverage:
      title: ConsumerCoverage
      type: object
      properties:
        max_apr:
          type: integer
        limit_1:
          $ref: '#/components/schemas/CoverageLimit'
      required:
        - limit_1
    BussinessType:
      title: BussinessType
      type: string
      enum:
        - corporation
        - partnership
        - llc
        - sole_proprietorship
    CoverageLimit:
      title: CoverageLimit
      type: object
      properties:
        amount:
          $ref: '#/components/schemas/CoverageAmount'
      required:
        - amount
    CoverageAmount:
      title: CoverageAmount
      type: object
      properties:
        min:
          type: integer
        max:
          type: integer
      required:
        - min
        - max
    RetrieveRejectionReasonsResponse:
      title: RetrieveRejectionReasonsResponse
      type: object
      additionalProperties:
        type: string
    FacilityId:
      title: FacilityId
      type: string
    DisbursementId:
      title: DisbursementId
      type: string
    Statement:
      title: Statement
      type: object
      properties:
        id:
          type: string
          description: The id of the statement
          example: stmt_deb6aba913d84feb987934f50c32bf03
        statement_date:
          type: string
          description: The date of the statement (YYYY-MM-DD)
          example: '2023-03-17'
        facility_id:
          $ref: '#/components/schemas/FacilityId'
        url:
          type: string
          description: The url of the statement pdf
          example: >-
            https://app.docspring.com/submissions/sub_gjX2LS7c6FjqZt12hQ/download
        created_on:
          type: string
          format: date-time
          description: Timestamp the statement object is created on
          example: '2023-02-27T00:00:00Z'
      required:
        - id
        - statement_date
        - facility_id
        - url
        - created_on
    Disbursement:
      title: Disbursement
      type: object
      properties:
        id:
          type: string
          description: The id of the disbursement
          example: dsb_234259b117854d0194bc5864a6c45b42
        facility_id:
          $ref: '#/components/schemas/FacilityId'
        amount:
          type: integer
          description: The amount of the disbursement, in cents (e.g. 1000 = $10.00)
          example: 100000
        status:
          $ref: '#/components/schemas/TransferStatus'
          description: The status of the disbursement
        created_on:
          type: string
          format: date-time
          description: Timestamp the disbursement object is created on
          example: '2023-02-27T00:00:00Z'
        transfer_type:
          $ref: '#/components/schemas/TransferType'
          description: The type of transfer to use for the disbursement
      required:
        - id
        - facility_id
        - amount
        - status
        - created_on
        - transfer_type
    DisbursementRequest:
      title: DisbursementRequest
      type: object
      properties:
        amount:
          type: integer
          description: The amount of the disbursement, in cents (e.g. 1000 = $10.00)
          example: 100000
        disbursement_bank_account:
          $ref: '#/components/schemas/BankAccount'
          description: The bank account to disburse to
        transfer_type:
          $ref: '#/components/schemas/TransferType'
          description: The type of transfer to use for the disbursement
      required:
        - amount
        - disbursement_bank_account
        - transfer_type
    Facility:
      title: Facility
      type: object
      properties:
        id:
          $ref: '#/components/schemas/FacilityId'
        application_id:
          $ref: '#/components/schemas/ApplicationId'
          description: >-
            The `application_id` of the corresponding loan application for the
            facility
        borrower_id:
          $ref: '#/components/schemas/ConsumerBorrowerId'
          description: The `borrower_id` of the corresponding borrower the facility is for
        loan_agreement_id:
          type: string
          description: >-
            The `loan_agreement_id` of the corresponding loan agreement the
            facility is for
          example: doc_234259b117854d0194bc5864a6c45b42
        credit_type:
          $ref: '#/components/schemas/CreditType'
          description: The type of credit production.
        created_on:
          type: string
          format: date-time
          description: Timestamp the loan agreement object is created on
          example: '2023-05-12T19:46:09.293Z'
        status:
          $ref: '#/components/schemas/CreditStatus'
          description: The status of the facility.
        account_number:
          type: string
          description: The account number of the credit facility
          example: '401542198'
        balance:
          type: integer
          description: The remaining balance of the loan, in cents
          example: 5000000
        payoff_balance:
          type: integer
          description: The current payoff balance of the loan, in cents
          example: 5000000
        origination_date:
          type: string
          description: The date the loan was originated (YYYY-MM-DD)
          example: '2023-05-12'
        disbursement_date:
          type: string
          description: The date the loan was disbursed (YYYY-MM-DD)
          example: '2023-05-12'
        remaining_term:
          type: integer
          description: The remaining term of the loan, in months
          example: 48
        payments_due:
          type: array
          items:
            type: string
          description: An array of payments due (empty if no payments are due)
          example: []
        monthly_payment:
          type: integer
          description: The monthly payment amount, in cents
          example: 124425
        next_payment_amount:
          type: integer
          description: The amount of the next payment, in cents
          example: 124425
        next_payment_due_date:
          type: string
          description: The date the next payment is due (YYYY-MM-DD)
          example: '2023-06-12'
        current_payment_due_date:
          type: string
          description: The date the current payment is due (YYYY-MM-DD)
          example: '2023-06-12'
        last_payment_date:
          type: string
          description: The date the last payment was made (YYYY-MM-DD)
        principal_paid_thru:
          type: string
          description: The date the principal is paid through (YYYY-MM-DD)
          example: '2023-05-11'
        next_billing_date:
          type: string
          description: The next billing date of the loan (YYYY-MM-DD)
          example: '2023-05-28'
        interest_accrued_thru:
          type: string
          description: The date the interest is accrued through (YYYY-MM-DD)
          example: '2023-05-11'
        next_accrual_cutoff_date:
          type: string
          description: The next accrual cutoff date of the loan (YYYY-MM-DD)
          example: '2023-06-11'
        scheduled_payoff_date:
          type: string
          description: The scheduled payoff date of the loan (YYYY-MM-DD)
          example: '2027-05-12'
        terms:
          $ref: '#/components/schemas/Offer'
          description: An object containing a summary of the terms of the facility.
        autopay:
          $ref: '#/components/schemas/Autopay'
          description: Whether or not autopay is enabled for the facility.
      required:
        - id
        - application_id
        - borrower_id
        - loan_agreement_id
        - credit_type
        - created_on
        - status
        - account_number
        - balance
        - payoff_balance
        - origination_date
        - disbursement_date
        - remaining_term
        - payments_due
        - monthly_payment
        - next_payment_amount
        - next_payment_due_date
        - current_payment_due_date
        - principal_paid_thru
        - next_billing_date
        - interest_accrued_thru
        - next_accrual_cutoff_date
        - scheduled_payoff_date
        - terms
    CreditStatus:
      title: CreditStatus
      type: string
      enum:
        - active
        - closed
    PayoffAmount:
      title: PayoffAmount
      type: object
      properties:
        amount:
          type: integer
          description: The amount of the payoff, in cents (e.g. 1000 = $10.00)
          example: 100000
        date:
          type: string
          description: The date the payoff is due (YYYY-MM-DD)
          example: '2023-05-12'
      required:
        - amount
        - date
    PayoffAmounts:
      title: PayoffAmounts
      type: array
      items:
        $ref: '#/components/schemas/PayoffAmount'
    LoanAgreementId:
      title: LoanAgreementId
      type: string
    LoanAgreement:
      title: LoanAgreement
      type: object
      properties:
        id:
          $ref: '#/components/schemas/LoanAgreementId'
        application_id:
          type: string
          description: >-
            The `application_id` of the corresponding loan application the
            agreement is for
          example: app_a9d2f388030d4f4296f80fc327e08d0d
        created_on:
          type: string
          format: date-time
          description: Timestamp the loan agreement object is created on
          example: '2022-12-31T20:47:38.152Z'
        document_url:
          type: string
          description: Url where the loan agreement document is hosted
          example: >-
            https://production-formapi-docs.s3.amazonaws.com/store/acc_QqdcDH47A63qKZbK3S/templates/tpl_4zqGxezHzrfqDaxGr2/submissions/sub_J9PbHbXYbL4jzRxc3R.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJESVN6QC4ACN3XSQ%2F20221231%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20221231T204739Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=cf0c6429ef72ca06d861cb912f5d1cf376a5c26c7f904aaa9bf08f10103785bd
        signature_timestamp:
          type: string
          format: date-time
          description: Timestamp of when e-signature is completed
        status:
          $ref: '#/components/schemas/LoanAgreementStatus'
          description: The status of the document
      required:
        - id
        - application_id
        - created_on
        - document_url
        - status
    LoanAgreementStatus:
      title: LoanAgreementStatus
      type: string
      enum:
        - pending_signature
        - signed
        - expired
    SignLoanAgreementResponse:
      title: SignLoanAgreementResponse
      type: object
      properties:
        status:
          $ref: '#/components/schemas/LoanAgreementStatus'
        id:
          $ref: '#/components/schemas/LoanAgreementId'
        application_id:
          $ref: '#/components/schemas/ApplicationId'
        signature_timestamp:
          type: string
          format: date-time
        document_url:
          type: string
          example: >-
            https://production-formapi-docs.s3.amazonaws.com/store/acc_QqdcDH47A63qKZbK3S/templates/tpl_4zqGxezHzrfqDaxGr2/submissions/sub_jQRTtHgekEbdJTxtsR.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJESVN6QC4ACN3XSQ%2F20221231%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20221231T210718Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=9ead57dba9e8e2179a3e9950f1c7c19fe8b10dfbc55f5ce09228bd216e4cdd73
        created_on:
          type: string
          format: date-time
          example: '2022-12-31T21:07:16.642Z'
      required:
        - status
        - id
        - application_id
        - document_url
        - created_on
    PaymentId:
      title: PaymentId
      type: string
    PaymentRequest:
      title: PaymentRequest
      type: object
      properties:
        facility_id:
          type: string
          description: The facility_id of the credit facility to make a payment for
          example: fac_234259b117854d0194bc5864a6c45b42
        amount:
          type: integer
          description: The amount of the payment, in cents
          example: 100000
        transfer_type:
          $ref: '#/components/schemas/TransferType'
          description: The type of ACH transfer
      required:
        - facility_id
        - amount
        - transfer_type
    Payment:
      title: Payment
      type: object
      properties:
        id:
          $ref: '#/components/schemas/PaymentId'
        amount:
          type: integer
          description: The amount of the payment, in cents
          example: 100000
        facility_id:
          type: string
          description: The facility_id of the credit facility to make a payment for
          example: fac_234259b117854d0194bc5864a6c45b42
        status:
          $ref: '#/components/schemas/TransferStatus'
          description: The status of the payment
        transfer_type:
          $ref: '#/components/schemas/TransferType'
          description: The type of ACH transfer
        created_on:
          type: string
          format: date-time
          description: Timestamp the payment is created on
          example: '2023-02-27T00:00:00Z'
      required:
        - id
        - amount
        - facility_id
        - status
        - transfer_type
        - created_on
  securitySchemes:
    BasicAuth:
      type: http
      scheme: basic
servers:
  - url: https://production.pier-finance.com/api
    description: Production
  - url: https://sandbox.pier-finance.com/api
    description: Sandbox
